# 数学形态学操作-Mophology

## Erosion腐蚀操作

给定腐蚀结构，在目标图像上进行滑动，对腐蚀结构中的区域像素**取最小值**放到结构中心位置，从而取得图像的**骨架**

## Dolation膨胀操作

给定膨胀结构，在目标图像上进行滑动，对腐蚀结构中的区域像素**取最大值**放到结构中心位置，从而**使得图像整体更加清晰**

腐蚀操作和膨胀操作和**卷积操作**较为类似

其中**结构**的设置**卷积核**操作类似

## 常用的结构元素

一般取3\*3或5\*5的结构框架, 然后在其中取不同的像素提取点

```python
# 设置结构元素(卷积核)
kernel = cv2.getStructuringElement(0,(11,11)) # 大小为11的矩形结构元素
```

## 开操作

先腐蚀再膨胀

去除图像中的细微线条或不明显线条

## 闭操作

先膨胀再腐蚀

闭操作可以在一定程度上完成对于**空缺图像的填补,** 但是其中的**kernel核的设定较难**

## 孔洞填充算法

对原图像的孔洞进行标注, 找一张以黑色为底色的图像将孔洞标注在上面, 

![在这里插入图片描述](https://www.guyuehome.com/Uploads/Editor/202210/2019121320492613.png)

## 连通区域标记

**行扫描法:** skimage库中的measure包中的**label函数**

- 从第一行开始进行逐行扫描, 对每一个连接的块(连通分量)进行一个标注(从0/1开始都可以)
- 从第二行开始以第一行的标注为基准, 对坐标/索引进行判断, 如果和上一行的块有连接, 则自动继承上一行该连通分量的标号(对角线也算相连)
  - 如果某行的一个块同时连接了上行的多个块, 即该块将上边的两个或多个连通分量连接起来了, 这是不对它们进行标注的覆盖, 而是建立一个等价对数组(二维数组), 将上边的两个或多个的等价对的标注放到一个一维数组中, 然后放到等价对数组中, 表示这两个或多个连通分量是相同的
- 重复上述操作, 直到最后一行
- 基于等价对将连通分量的标注进行重组, 使之成为有效的不重复的标注, 完成一张图中像素点的连通分量的检索

**对角线相连的像素块也作为同一个连通分量**

## 参考文档

[孔洞填充](https://www.guyuehome.com/40590)

[形态学-腐蚀、膨胀、开操作、闭操作](https://blog.csdn.net/Fishmemory/article/details/53113746)